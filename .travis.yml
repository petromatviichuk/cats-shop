sudo: required
language: ruby
rvm:
- 2.3.1
addons:
  postgresql: 9.6
before_script:
- psql -c 'create database cats_shop_test;' -U postgres
- export TRAVIS_SECURE_ENV_VARS=true
dist: trusty
script:
- bundle install
- bundle exec rake db:create
- bundle exec rake db:migrate
- bundle exec rake db:seed
- bundle exec rake db:test:prepare
- bundle exec rspec
after_success:
- pip install --user awscli
- export PATH=$PATH:$HOME/.local/bin
- bash scripts/auth.sh
- cat ~/.aws/credentials
- bash scripts/deploy.sh
env:
  global:
  - secure: Zi3YGZoIWdwDiT7QgfVxZNvPn9NrhNlR3c73Q1Sy55Fpz5o3ZAGoaLhfLZCYosklhsXsE9JbJUIbzV1FSB1jW+exke1Thw+kyOqS0zSOBtIRBqLIHymmxtaS2UNB0lsgr/prYGRBwX22FJfLlV5s8bswe5+t4I9XT/cMqQfKZIbubsNDRU7eiNAcTqFWL3g6rO8pfHYL95VTIwfHoi09zyh0KzM/Hvq0IzLnDeMyc7PTYyAmuxKjwC7z+Gkz5VTJcxBhI4ySpcHG5lv+KKDqik+AZLhlzbOsTss0jmm8hMv5AhqMvelXK+yCEpzZz2MXxFFCJLPNDsevsAX4MQ9jwSqG3wVCoG5pWz7Zgm03yO8VDF7cI47LJYOZNBsyvH75luhrNqdWzNt8gTSFep8kSKh1Zvs4LgiDnf9Yky4UdmHtUlMfi8jpl3VnuGYSNDkKTv6ATXKoVP21gSy/F3ylYjx7R9g4alnjpjdayqwctLGvw8KscT9mN2WNMU+dy96DQaZJqHUuQIcd4zdPD2uaKDE+HSaqjBGuJW0gadmC8Ga5kZcmuFD+hOv3ohvvQssHyhj5fVCtQYgzpToF4f+pHKwOcsYirvx/Ey17TIgPUZgVDCYAlkOlb5FbbdcxaKru0vyHWcmzcM9+swjvsN+1840iTQB388AVsye3R7xKNXE=
  - secure: ssE2Bi19tvt/mvpZo+94LTcVPXa0JW/YwK1Jf+IgnMF+0oPSL3M8aVDRr8gxXsgDa/jVKEn8rRQnpxE1irOjCxIu9GKPoEia8nbn8pMCz5rxEG21NanJbR4XMK96OvZEvxCboHAseAX6pVK59qSJ2tsinM8y4Q/NKsJaVtNQVH/vaBEDztty/aA7VJg6zTlEkhez96s74NXoLsantcmHyVVXJ2X6iXOZ/FHMzkxLS4Oa3vclclPHbobGIazfGXW7ISOUuG7pJzb5KS4MaX7x5zkgMhNg9Slald/KBTE7jjT9vzTGZUIcF3FJDTP8K0PoNMqj+gYUnyzmNv3FeIUQyykyNUJSsgsnH1yCHOhn9W5nF8pIMN4Y1pWsJfgY3wG+3NK4zJhaExqYnPGA+doyMEM7UBEURErQiJqpIhCwL+QnAXoRSjO6ysfmVV/96xaWojyx/BI8IjV4VMrswhVkWlXlQcsbn264dDqe9bI9NaLHm4o4hCNY2/tkReZ/tsXYfxcmdkTP7GTa1v39ikDtIZT7OY+oLinkrWjYsY2DOQQDnqPLzqMGyGIgf1EXToI8ZRc9f3BD3N1MIrd+GRvfm836HpXiuwily0m1zK7LKRaWzXsmQGoCwtujqhzETOx1V1ndIc9sGtWXn+FMWk7fb0QwOzO9ThMTg/iSNiAiYIU=
