sudo: required
language: ruby
rvm:
- 2.3.1
addons:
  postgresql: 9.6
before_script:
- psql -c 'create database cats_shop_test;' -U postgres
- export TRAVIS_SECURE_ENV_VARS=true
dist: trusty
script:
- bundle install
- bundle exec rake db:create
- bundle exec rake db:migrate
- bundle exec rake db:seed
- bundle exec rake db:test:prepare
- bundle exec rspec
after_success:
- pip install --user awscli
- export PATH=$PATH:$HOME/.local/bin
- bash scripts/auth.sh
- bash scripts/deploy.sh
env:
  global:
  - secure: nhycpBGn3kEF6hGX5/KVASlUH5o28+DRpdk2AoOurbTQ4LQqurpkBnxyeUwwEFU7q7t4JVARaH9ob7ON7YtrTH6sFbNXJ67+g5c9gMLG9bM7OPOOzGQTk5+HmAMJWWnl5roOD9PbnTd1ogsAPQ/CaA/kY9lDVI2IRnbdcM9pVT5yxET+fchUm3rvcYvE4zhJtw77O8CJl7E8YgJ1voumueNh1+amyQawwZ0e+4yfj7zDPEWQoYJ/JVYXKFG3bgwMbf4b0Kf0BQsUE3v7pEmFgq18R4t5ttWQ+vc/Icr/kMY/qImemUMEXWUYkUL65c5zEJxOFPE4JNCXjbVVMewHEzUqXRTz58zAiywqDUvQTbz5/sa4GczoX9MOlMmfFgofT52c0UZIA9BPKexD0nBnTVEGulN+z8YV89bB7zK4Kwb5FBfnE337frQ47dY1t8K/yBJNLob2T9mTXC3u0pcTP2latRd5NWMyUT3ZOYh4BPxsrfX7HNPzEkiDWYgUaWVFODrUSqbsQSmI9PxoYDTehWWYc2yVNasMQ2pJ4YeZupwwkPeipSKyETkKxw7yv/FdGr4UkQZ61ttshlB4p5GJaj2UyDXKGcX83ofc4drA+osj6rqEGheNNq1eQtBPyVe2JiP0ES5WEGODOiaGi1Mh9pIBdfoL/Gsy/iYlCP+0YPo=
  - secure: NkVU3GLnee6lvxy4fplql/IUn/fM0cxJqOj1Jfd/7KXktIqHys/nLVtoSCGN6BYsxA79VZICWoHG6RKQmK38ShafLiZJTt5bDcKfKY8ElhlCVVPy4R3CSKiSDUgeK52o0yZ22FWVCyU0w8HMGlFNIyvwxLbhb3Y1jNcpfuuXU/S6nLomKc9J4rQV9e5GaEdTdman516MEXHPHohyUfzXceA4lp2uLkWU9gAKQeYHTbTEpv4K/GqrVL8rdOAj0ctTs1q83MDw9RTNrO2GcMCXcZISBmGYa9jffgYt+KN2KUwibB3nSHM7WIqwUjER0RX1EuC0FOiOynpz4/mIcbWK23j6jHfQ8hZcC0VVVjQv7DC2hJF43byqUh+ClL2GiB2n5prwa1x17llGAXOsKP7E+LGC9LgOd827hYtUifdTJ7AGIJ3U0iUkJlK05k4oEUbUnB/WF8cnNJXI3qmAy3676huyJxFF9JVZoPuwLkw6taH3yDvz4VcbAIuVOjewkIEzKg43rRRhxBMj0gapWbVDUZZWio8jzvQGSWsg71SdkPaW8v7hb0yXMMmOYMrlM9a5N0V/tmMwxRJrgsJl2WH551ENuSaAhRN9kDJac4DsLlgAxr7+IcvWU7C4K4PNoeNTGo17+pQiQoD/X7Fy7jsI7wdn9qOxRuGQqIKa1wB1vxs=
